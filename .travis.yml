# autogenerated file; do not edit
language: c
sudo: false
dist: trusty

addons:
 apt:
  packages:
   - php5-cli
   - php-pear
   - valgrind

compiler:
 - gcc
 - clang

env:
 matrix:
  - PHP=5.6 enable_debug=yes enable_maintainer_zts=yes
  - PHP=7.0 enable_debug=yes enable_maintainer_zts=yes
  - PHP=7.1 enable_debug=yes enable_maintainer_zts=yes
  - PHP=7.2 enable_debug=yes enable_maintainer_zts=yes
  - PHP=master enable_debug=yes enable_maintainer_zts=yes
  - PHP=7.3 enable_debug=no enable_maintainer_zts=no
  - PHP=7.3 enable_debug=yes enable_maintainer_zts=no
  - PHP=7.3 enable_debug=no enable_maintainer_zts=yes
  - PHP=7.3 enable_debug=yes enable_maintainer_zts=yes
  - CFLAGS='-O0 -g --coverage' CXXFLAGS='-O0 -g --coverage' PHP=7.3

cache:
 directories:
  - $HOME/cache

before_cache:
 - find $HOME/cache -name '*.gcda' -o -name '*.gcno' -delete

install:
 - make -f travis/pecl/Makefile php

script:
 - make -f travis/pecl/Makefile ext PECL=apfd
 - make -f travis/pecl/Makefile test

after_success:
 - test -n "$CFLAGS" && cd .libs && bash <(curl -s https://codecov.io/bash) -X xcode -X coveragepy

